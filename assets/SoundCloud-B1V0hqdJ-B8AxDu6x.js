import{_ as C,M as A,i as V,J as I}from"./index-CqByBC7l.js";function k(u,s){for(var p=0;p<s.length;p++){const i=s[p];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in u)){const d=Object.getOwnPropertyDescriptor(i,n);d&&Object.defineProperty(u,n,d.get?d:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}))}var y,P;function N(){if(P)return y;P=1;var u=Object.create,s=Object.defineProperty,p=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,n=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,v=(t,e,r)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,j=(t,e)=>{for(var r in e)s(t,r,{get:e[r],enumerable:!0})},f=(t,e,r,h)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of i(e))!d.call(t,a)&&a!==r&&s(t,a,{get:()=>e[a],enumerable:!(h=p(e,a))||h.enumerable});return t},S=(t,e,r)=>(r=t!=null?u(n(t)):{},f(!t||!t.__esModule?s(r,"default",{value:t,enumerable:!0}):r,t)),_=t=>f(s({},"__esModule",{value:!0}),t),o=(t,e,r)=>(v(t,typeof e!="symbol"?e+"":e,r),r),m={};j(m,{default:()=>c}),y=_(m);var b=S(A()),g=V(),w=I();const E="https://w.soundcloud.com/player/api.js",M="SC";class c extends b.Component{constructor(){super(...arguments),o(this,"callPlayer",g.callPlayer),o(this,"duration",null),o(this,"currentTime",null),o(this,"fractionLoaded",null),o(this,"mute",()=>{this.setVolume(0)}),o(this,"unmute",()=>{this.props.volume!==null&&this.setVolume(this.props.volume)}),o(this,"ref",e=>{this.iframe=e})}componentDidMount(){this.props.onMount&&this.props.onMount(this)}load(e,r){(0,g.getSDK)(E,M).then(h=>{if(!this.iframe)return;const{PLAY:a,PLAY_PROGRESS:R,PAUSE:T,FINISH:D,ERROR:L}=h.Widget.Events;r||(this.player=h.Widget(this.iframe),this.player.bind(a,this.props.onPlay),this.player.bind(T,()=>{this.duration-this.currentTime<.05||this.props.onPause()}),this.player.bind(R,l=>{this.currentTime=l.currentPosition/1e3,this.fractionLoaded=l.loadedProgress}),this.player.bind(D,()=>this.props.onEnded()),this.player.bind(L,l=>this.props.onError(l))),this.player.load(e,{...this.props.config.options,callback:()=>{this.player.getDuration(l=>{this.duration=l/1e3,this.props.onReady()})}})})}play(){this.callPlayer("play")}pause(){this.callPlayer("pause")}stop(){}seekTo(e,r=!0){this.callPlayer("seekTo",e*1e3),r||this.pause()}setVolume(e){this.callPlayer("setVolume",e*100)}getDuration(){return this.duration}getCurrentTime(){return this.currentTime}getSecondsLoaded(){return this.fractionLoaded*this.duration}render(){const{display:e}=this.props,r={width:"100%",height:"100%",display:e};return b.default.createElement("iframe",{ref:this.ref,src:`https://w.soundcloud.com/player/?url=${encodeURIComponent(this.props.url)}`,style:r,frameBorder:0,allow:"autoplay"})}}return o(c,"displayName","SoundCloud"),o(c,"canPlay",w.canPlay.soundcloud),o(c,"loopOnEnded",!0),y}var O=N();const U=C(O),J=k({__proto__:null,default:U},[O]);export{J as S};
